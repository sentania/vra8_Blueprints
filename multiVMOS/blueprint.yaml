formatVersion: 1
name: Lab Multi OS and VM Selection
version: 1.0
description: Installs multiple basic servers in my Lab
inputs:
  deploymentTarget:
    type: string
    description: Cloud Target
    title: Cloud Target
    enum:
      - comp
      - cloud
    default: comp
  flavor:
    type: string
    enum:
      - Small
      - Standard
    description: Size of Server
    title: Node Size
    default: Small
  image:
    type: string
    enum:
      - CentOS7
      - Windows2019
    title: OS Image
    default: CentOS7
resources:
  VirtualMachine:
    type: Cloud.Machine
    properties:
      constraints:
        - tag: '${input.deploymentTarget}'
      name: MultiOSVM
      image: '${input.image}'
      flavor: '${input.flavor}'
      networks:
        - name: '${resource.ServerNetwork.name}'
          network: '${resource.ServerNetwork.id}'
      storage:
        constraints:
          - tag: '${input.deploymentTarget}'
  ServerNetwork:
    type: Cloud.Network
    properties:
      networkType: existing
      constraints:
        - tag: '${input.deploymentTarget}'
